# به نام خدا

## تکلیف دوم فردی مهندسی نرم افزار 
#### استاد : حسن بشیری
#### دستیار : امیرحسین بابائیان
#### موضوع تحقیق:
#### بررسی روش مبتنی بر ادعا (Assertion) برای آزمون نرم افزار
#### محمدرضا هادی قاسم پور ۹۷۰۸۱۱۳



## تست نویسی چیست؟
زبان ها، پلتفرم ها، کتابخانه ها و محیط های توسعه متفاوتی برای نوشتن برنامه های کامپیوتری وجود دارد. که هر کدام از آنها دارای شیوه ها و روش های مختص خود برای نوشتن برنامه است. به طور مثال پلتفرم J2EE به همراه زبان Java و محیط توسعه Intellij و یا پلتفرم .Net به همراه زبان c# و محیط توسعه Visual Studio
اما هیچ پلتفرم برنامه نویسی بدون اینکه راهکاری برای کمک به مطمئن شدن کد از نظر داشتن و نداشتن نقص ارائه دهد، کامل نیست.
در واقع هر پلتفرمی برای کامل شدن چرخه توسعه نرم افزار ملزم به ارائه ابزارهایی برای تست و مطمئن شدن از درستی کارکرد کدها و برنامه های نوشته شده است.
کسی دوست ندارد  یک تماس اضطراری خارج از ساعت( در اواسط شب )  برای پشتیبانی از نرم افزار به دلیل وقوع خطا در سیستم دریافت کند. اما اگر این خطاها زودتر از آنچه که رخ میدهند پیدا شوند هزینه درست کردنشان بسیار پایین تر خواهد بود و همچنین دیگر به این مشکلات بر نخواهیم خورد.
برنامه هایی که با تست نوشته میشوند به نوعی قابل اطمینان و reliable هستند. همچنین تست هایی که بصورت خودکار و با کد نوشته میشوند بسیار راحت تر و سریعتر از تست دستی یا manual testing هستند. همچنین در هر لحظه و هر جایی و حتی به شکل زمان بندی شده می توانند اجرا شوند.
انواع مختلفی از تست ها در توسعه تست محور یا Test Driven Development وجود دارد. یکی از این نوع تست ها تست مبتنی بر Assertion (ادعا) است.

## تست مبتنی بر assertion چیست؟
یک assertion یا ادعا در واقع یک شرط boolean برای یک نقطه خاص از برنامه می باشد که باید true شود و در غیر اینصورت نشان دهنده وجود خطا و bug در برنامه و سیستم است.
### مزیت ها:
مزیت اصلی تست مبتنی بر assertion شناسایی نقص در برنامه است. سایر مزیت ها مثل:
تشخیص خطاهای ظریف که ممکن است مورد توجه قرار نگیرند.
تشخیص خطاها قبل از اینکه رخ دهند
بیانیه ای است مبنی بر تضمین صحت کد نوشته شده

### مضرت ها:
مضرت های این نوع تست این است که خود تست نوشته شده ممکن است دارای خطا باشد و مشکلات زیر را به دنبال داشته باشد:
عدم گزارش اشکال و خطایی که وجود دارد.
خطایی را گزارش کند که وجود ندارد.
میتواند به side effects و عوارض جانبی منجر شود.
اگر دارای خطا باشد و حافظه را نیز اشغال کند، می تواند برای اجرا زمان ببرد.



## نحوه کار تست Assertion:
تست ها بصورت مجموعه ای از متد ها یا فانکشن ها نوشته میشوند. هر متد وظیفه تست قسمت خاصی از کد را دارد.
هر تست متد نوشته شده دارای 3 مرحله است:
- Arrange: ایجاد اشیاء، ایجاد دیتاها و ورودی های تست
- Act: اجرای کد برنامه( کد production ) ، صدا زدن متدها ، مقداردهی property ها
- Assert: چک کردن نتیجه، pass یا fail شدن تست



مثال:
برای ذکر مثال در تست مبتنی بر ادعا از پلتفرم Net. استفاده میکنیم. پلتفرم Net. ابزارهای متفاوتی را برای نوشتن تست به ما میدهد که یکی از آن ها XUnit است
.
فرض کنیم کلاس PlayerCharacter دارای دو متد Sleep و CalculateHealthIncrease برای یک بازی کامپیوتری است.  متد Sleep در مدت زمانی که کاراکتر بازی در حالت خواب است، میزان جان و سلامتی آن یعنی پراپرتی Health به مقداری رندوم بین 1 تا 101 افزایش میابد.
همچنین مقدار اولیه پراپرتی Health به مقدار 100 می باشد.

![](C:\Users\Mohamadreza\Desktop\test1.png)

حال میخواهیم با استفاده از یک تست متد، تست کنیم که آیا بعد از Sleep جان کاراکتر بازی به مقداری که ما خواسته بودیم افزایش می یابد یا خیر؟
کلاسی با عنوان PlayerCharacterShould در پروژه تست ایجاد میکنیم. دقت کنیم که نام کلاس های تست با عبارت Should خاتمه می یابند. این یک قرارداد است و به این معنی می باشد که که PlayerCharacter باید(Should) به شکل متد هایی که در داخل این کلاس هستند باشد.
متدی با نام IncreaseHealthAfterSleep ایجاد میکنیم. و در آن سه مرحله Arrange و Act و Assert را به شکل زیر انجام میدهیم.
همچنین Annotation ای به نام Fact در XUnit نشان دهنده این است که متد نوشته شده یک متد تست است.


![](C:\Users\Mohamadreza\Desktop\test2.png)

می بینیم که در متد نوشته شده در قسمت Assert تابعی با عنوان InRange صدا زده میشود. این تابع چک میکند که اگر sut.Health بین 101 و 200 باشد یعنی تست ما با موفقیت pass شده است. و اگر نباشد تست fail میشود.
در شکل زیر در قسمت Test Explorer محیط توسعه Visual Studio می بینیم که تست ما با موفقیت پاس شد.



![](C:\Users\Mohamadreza\Desktop\test3.png)


# پایان

